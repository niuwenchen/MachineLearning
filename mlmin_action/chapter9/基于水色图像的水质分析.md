### 基于水色图像的水质评价
有经验的从事渔业生成的从业者可以通过观察水色变化调控水质，以维持养殖水体系生态系统中
浮游植物，微生物类，浮游动物等合理的动态平衡。当前，数字图像处理技术为计算机监控技术
在水产养殖业的应用提供更大的空间。 在水质在线检测方面，数字图像处理技术是基于计算机视觉的，以专家经验为基础，
对池塘水色进行优劣分级，实现对池塘水色的准确快速判别
 ![](file:///C:\Users\loneve\Pictures\data_min\7.PNG)

### 9.2 分析方法和过程
通过拍摄水样，采集得到水样图像，而图像数据的维度过大，不容易分析，需要从中提取水样图像的特征，
提取反映图像本质的一些关键指标。以达到自动进行图像识别或分了的目的。显然，图像特征提取是图像
识别或分类的关键步骤，图像特征提取的效果直接影响到图像识别和分类的好坏

图像特征包括颜色特征、纹理特征、形状特征和空间关系特征等。与几何特征相比，颜色特征更为稳健，
对于物体的大小和方向均不敏感，表现出较强的鲁棒性。由于本案例中水色图像是均匀的，故主要关注
颜色特征。颜色特征是一种全局特征，描述了图像或图像区域所对应的景物的表面性质。 一般颜色特征是
基于像素点的特征，所有属于图像或图像区域的像素都有各自的贡献。在利用图像的颜色信息进行图像处理、
识别、分类的研究中，在实现方法上已有大量的研究成功，主要采用颜色处理常用的直方图法和颜色矩方法等

颜色直方图是最基本的颜色特征表示方法，它反映的是图像中颜色的组成分布，即出现了哪些颜色以及各种颜色出现
的概率。其有点在于他能简单的描述一副图像中颜色的全局分布，即不同色彩在整幅图像中所占的比例，特别适用于描述
那些难以自动分割的图像和不需要考虑物体空间位置的图像。其缺点在于无法描述图像中颜色的局部分布及每种色彩所处的空间
位置，即无法描述图像中的某一具体的对象或物体

基于颜色矩的提取图像特征的数学基础为图像中任何的颜色分布均可以用他的矩来表示。根据概率论的理论，随机变量
的概率分布可以由其各阶矩唯一的表示和描述。一副图像的色彩分布可以认为是一种概率分布，那么图像可以由其各阶矩
来描述。 颜色矩包含各个颜色通道的一阶矩，二阶矩，三阶矩，对于一副RGB颜色空间的图像，具有RGB
三个颜色通道，则由9个分量。


    本案例采用颜色矩来提取水样图像的特征，即建立水样图像与反映该图像特征的数据信息关系，
    同时由有经验的专家对水样图像根据经验进行分类，建立水样数据信息与水质类别的专家样本库，从而构建
    分类模型，得到水样图像与水质类别的映射关系，并经过不断调整系数优化模型，最后利用训练好的
    分类模型，用户就能方便的通过水样图像，自动的判别出该水样的水质类别。
  
![](file:///C:\Users\loneve\Pictures\data_min\8.PNG)

### 9.2.1 数据预处理
*  图像切割
    具体实施方式是提取图像中央101*101像素的图像。 设原始图像I的大小是M*N, 则截取宽从第fix(M/2)-50
    到fix(M/2)+50 的图像
    ![](file:///C:\Users\loneve\Pictures\data_min\9.PNG)
*  特征提取
    （1）一阶颜色矩
        一阶原点矩，反映图像的整体明暗程度
        ![](file:///C:\Users\loneve\Pictures\data_min\10.PNG)
       其中Ei是在第i个颜色通道的一阶颜色矩，对于RGB颜色空间的图像，i=1,2,3
       Pij是第j个像素的第i个颜色通道的颜色值
     （2）二阶颜色矩
        二阶中心矩的平方根
        ![](file:///C:\Users\loneve\Pictures\data_min\11.PNG)
        
      （3）二阶颜色矩
        三阶中心矩的立方根
        ![](file:///C:\Users\loneve\Pictures\data_min\12.PNG)
        
水色图像特征与相应的水色类别的部分数据
![](file:///C:\Users\loneve\Pictures\data_min\13.PNG)

### 9.2.2 模型构建
1 模型输入
    抽取80%作为训练样本，其余为测试样本。
    本案例采用支持向量机作为水质评价分类模型。
    将原始数据扩大30倍
    出现的问题，并没有按照文件中所说的那样 混淆矩阵有5类，分析是在取数据的时候，并没有均有的将5类数据
    打乱，也就是说，可能在训练数据或测试数据中并没有5类
    
    
    [[38  1  1  0  0]
    [ 0 34  0  0  0]
    [ 0  0 62  0  0]
    [ 0  0  2 19  0]
    [ 0  0  0  2  3]]
    [[11  0  0  0  0]
    [ 0 10  0  0  0]
    [ 0  0 16  0  0]
    [ 0  0  1  2  0]
    [ 0  1  0  0  0]]
    

 

拓展思考
上面是采用SVM进行模型构建，空气质量用C4.5 进行构建

       
        