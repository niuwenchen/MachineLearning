## 电子商务网站用户行为分析及服务推荐
对于用户而言，推荐系统和搜索引擎是两个互补的工具。搜索引擎满足有明确目标用户的需求，而推荐系统
能够帮助用户发现其感兴趣的内容。

本案例主要的研究对象是北京某家法律网站，它是一家电子商务类的大型法律咨询网站，致力于为用户
提供丰富的法律信息与专业咨询服务，并为律师与律师事务所提供卓有成效的互联网整合营销解决方案。随着其网站访问量增大，数据信息量也在大幅增长。
用户在面对大量信息时无法及时从中获得自己需要的信息，对信息的使用效率越来越低。这种浏览大量
无关信息的过程，使用户需要花费大量的时间才能找到自己需要的信息，从而使得用户不断流失。给企业造成巨大
的损失。

为了能够更好的满足用户需求，依据其网站海量的数据，研究用户的兴趣偏好，分析用户的需求和行为，
发现用户的兴趣点，从而引导用户发现自己的信息需求，将长尾网页准确的推荐给用户，帮助用户发现
它们感兴趣但很难发现的网页信息。为用户提供个性化的服务，并且建立网站与用户之间的密切关系，
让用户对推荐系统产生依赖，从而建立稳定的企业忠实顾客群，实现客户链式反应增值，提高消费者满意度。

当用户访问网站页面时，系统会记录用户访问网站的日志，其访问的数据记录见表12-2

 ![](file:///C:\Users\loneve\Pictures\data_min\14.png)
 
 依据原始数据，分析一下目标
 *  按地域研究用户访问时间，访问内容和访问次数等分析主题，深入了解用户对访问网站的行为
    和目的以及关心的内容。
    
 *  借助大量的用户的访问记录，发现用户的访问行为习惯，对不同需求的用户进行相关的负uyemian的推荐
 
 ## 12.2 分析方法与过程
 正常情况下，需要对用户的兴趣爱好以及需求进行分类。因为在用户访问记录中，没有记录用户访问
 网页时间的长短，因此不容易判断用户兴趣爱好。因此，本文根据用户访问的网页信息进行分类处理，
 主要采用以下方法处理： 以用户浏览网页的类型进行分类，然后对每个类型中的内容进行推荐。
 
 
 ## 12.2.1 数据抽取
 因为本例是以协同过滤算法为主导，其他的推荐算法为辅，而协同过滤的算法就是通过历史数据找出
 相似的用户或者网页。因此，在数据抽取的过程中，尽可能选择大量的数据，这样就能降低推荐结果的
 随机性，提高推荐结果的准确性，能更好的发掘长尾网页中用户感兴趣的网页。
 
  ![](file:///C:\Users\loneve\Pictures\data_min\15.png)
  
 每个地区的用户访问习惯以及兴趣爱好存在差异性，本例抽取广州地区的用户访问数据进行分析，
 其数据量总计有837450条记录，其中包括用户号，访问时间，来源网站，访问页面，页面标题，来源网页，标签，万股额类别和关键词等属性。
 
 本章的处理过程：建立数据库--导入数据--搭建Python的数据库操作环境--对数据进行分析--建立模型。
 导入7law.sql 就成功的配置好了数据库平台
 
    engine = create_engine('mysql+pymysql://root:0000@127.0.0.1:3307/test?charset=utf8')
    sql = pd.read_sql("all_gzdata",engine,chunksize=100)

realIP,realAreacode,userAgent,userOS,userID,clientID,timestamp,timestamp_format,
pagePath,ymd,fullURL,hostname,pageTitle,pageTitleCateoryId,pageTitlecategoryName
pageTitleKw,fullReferrer,fullReferrerURL,orgainicKeyword,source

 
### 12.2.2 数据探索分析
1 网页类型分析
针对原始数据中用户点击的网页类型进行统计，网页类型是指“网址类型”中的前3位数字。“分块进行”，必要
时可以使用多线程甚至分布式计算。

![](file:///C:\Users\loneve\Pictures\data_min\16.png)

因此，可以得到用户点击的页面类型的排行榜为：咨询相关，知识相关，其他方面的网页，法规（类型为301），法律相关

进一步对咨询类别内部进行统计分析，其结果如下，其中浏览咨询内容页(101003)记录的最多，其次是咨询列表页(101002)
和咨询首页(101001),综合上述初步讨论，可以得出用户都喜欢通过浏览问题的方式找到自己需要的信息，而不是以提出
问题或者查看长篇的知识的方式得到所需信息。

![](file:///C:\Users\loneve\Pictures\data_min\17.png)

统计分析知识类型内部的点击情况，因为知识类型中只有一种类型(107001)，所以利用网址对其进行分类，获得知识
内容页(http://www.****.com/info/*/数字.html),以及知识首页(http://www.****.com/info/*/)和知识列表页
(http;//www.****.com/info/*.html)的分布情况

![](file:///C:\Users\loneve\Pictures\data_min\18.png)



分析其他（199）页面的情况，其中网址中带有?的占了32%左右，其他咨询相关与法规专题占43%,地区和律师占比26%
在网页的分类中，有律师，地区，咨询相关的网页分类，为何这些还会存在其他类别中？


综上分析的3中情况，可以发现大部分用户浏览的网页的情况为：咨询内容页，知识内容页，法规专题页，咨询经验
因此，在后续分析中，选取占比最大uode两类（咨询内容页和知识内容页）进行模型分析

